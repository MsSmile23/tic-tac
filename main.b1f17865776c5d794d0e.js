(()=>{"use strict";var t=document.querySelector(".game"),e=document.querySelectorAll(".cell"),n=document.querySelector(".end-overlay"),o=document.querySelector(".winner"),c=document.querySelector(".raund"),r=document.querySelector(".players"),a=document.querySelector(".new-raund"),u=document.querySelector(".new-game"),l=document.querySelector(".popup"),s=document.forms.players,i=document.querySelector("#x"),m=document.querySelector("#o"),d=document.querySelector(".count"),y=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],v=1,f=1,x={count:0,symbol:"X"},C={count:0,symbol:"O"},b=function(){e.forEach((function(t){t.textContent="",t.classList.contains("cell-winner")&&t.classList.remove("cell-winner")}))},p=function(t){if("draw"===t)o.textContent="Ничья",x.count++,C.count++;else{var e=x.symbol===t?x:C;e.count++,o.textContent="Победитель: ".concat(e.name)}n.classList.add("end-overlay-visible"),d.textContent="Счёт: ".concat(x.count," : ").concat(C.count)};s.addEventListener("submit",(function(t){t.preventDefault(),x.name=s.player1.value,C.name=s.player2.value,r.textContent="".concat(x.name," vs ").concat(C.name),i.textContent="Крестики: ".concat(x.name),m.textContent="Нолики: ".concat(C.name),s.querySelectorAll(".input").forEach((function(t){t.value=""})),l.classList.remove("popup-visible")})),t.addEventListener("click",(function(t){if(t.target!==t.currentTarget&&""===t.target.textContent){var n=f%2?"X":"O";t.target.textContent=n,f>4&&(function(t){for(var n,o,c=0;c<y.length;c++)if((o=[e[(n=y[c])[0]],e[n[1]],e[n[2]]]).every((function(e){return e.textContent===t})))return o.forEach((function(t){t.classList.add("cell-winner")})),!0;return!1}(n)?p(n):9===f&&p("draw")),f++}})),a.addEventListener("click",(function(){b(),v++,f=1,c.textContent="Раунд ".concat(v),n.classList.remove("end-overlay-visible"),v%2==0?(x.symbol="O",C.symbol="X",i.textContent="Крестики: ".concat(C.name),m.textContent="Нолики: ".concat(x.name)):(x.symbol="X",C.symbol="O",i.textContent="Крестики: ".concat(x.name),m.textContent="Нолики: ".concat(C.name))})),u.addEventListener("click",(function(){b(),v=1,f=1,x={count:0,symbol:"X"},C={count:0,symbol:"O"},i.textContent="",m.textContent="",d.textContent="Счёт: ".concat(x.count," : ").concat(C.count),c.textContent="Раунд ".concat(v),n.classList.remove("end-overlay-visible"),l.classList.add("popup-visible")}))})();